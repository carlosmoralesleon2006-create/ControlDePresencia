{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="bg-white p-6 rounded-3xl shadow-2xl text-center mb-6">
        {% if current_user.is_authenticated %}
            <i class="fas fa-handshake fa-4x text-indigo-500 mb-3"></i>
            <h1 class="text-4xl font-extrabold text-gray-800 mb-1">
                ¡Hola, {{ current_user.nombre }}!
            </h1>
        {% else %}
            <i class="fas fa-lock-open fa-4x text-green-500 mb-3"></i>
            <h1 class="text-4xl font-extrabold text-gray-800 mb-1">
                Bienvenido al Portal RRHH
            </h1>
            <p class="text-lg text-gray-600">
                Inicia sesión para acceder a tu información o usa el menú superior para registrarte.
            </p>
            <div class="mt-4 flex justify-center space-x-4">
                <a href="{{ url_for('main.login') }}" class="btn btn-primary btn-lg rounded-full shadow-lg hover:shadow-xl transition duration-300">
                    <i class="fas fa-sign-in-alt me-2"></i> Iniciar Sesión
                </a>
            </div>
        {% endif %}
    </div>

    {% if current_user.is_authenticated and current_user.rol_obj and current_user.rol_obj.nombre in ['Administrador', 'Superadministrador'] %}

    <h2 class="text-3xl font-bold text-indigo-700 text-center mt-8 mb-5">Panel de Gestión</h2>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">

        <div class="card shadow-xl rounded-2xl bg-white transform hover:scale-105 transition duration-300 border-l-4 border-l-red-500">
            <div class="card-body p-4 text-center">
                <i class="fas fa-user-tie fa-3x text-red-500 mb-3"></i>
                <h5 class="card-title text-xl font-semibold mb-2">Gestión de Empleados</h5>
                <p class="card-text text-gray-600 mb-3">Altas, bajas y modificaciones de personal.</p>
                <a href="{{ url_for('main.gestion_empleados') }}" class="btn btn-danger btn-sm rounded-full">
                    <i class="fas fa-arrow-right me-1"></i> Ir a Gestión
                </a>
            </div>
        </div>

        <div class="card shadow-xl rounded-2xl bg-white transform hover:scale-105 transition duration-300 border-l-4 border-l-blue-500">
            <div class="card-body p-4 text-center">
                <i class="fas fa-clock fa-3x text-blue-500 mb-3"></i>
                <h5 class="card-title text-xl font-semibold mb-2">Gestión de Horarios</h5>
                <p class="card-text text-gray-600 mb-3">Creación y modificación de horarios y franjas.</p>
                <a href="{{ url_for('main.gestion_horarios') }}" class="btn btn-primary btn-sm rounded-full">
                    <i class="fas fa-arrow-right me-1"></i> Ir a Horarios
                </a>
            </div>
        </div>

        <div class="card shadow-xl rounded-2xl bg-white transform hover:scale-105 transition duration-300 border-l-4 border-l-yellow-500">
            <div class="card-body p-4 text-center">
                <i class="fas fa-users-cog fa-3x text-yellow-500 mb-3"></i>
                <h5 class="card-title text-xl font-semibold mb-2">Roles y Permisos</h5>
                <p class="card-text text-gray-600 mb-3">Define los roles de la organización.</p>
                <a href="{{ url_for('main.gestion_roles') }}" class="btn btn-warning btn-sm rounded-full text-white">
                    <i class="fas fa-arrow-right me-1"></i> Ir a Roles
                </a>
            </div>
        </div>

        <div class="card shadow-xl rounded-2xl bg-white transform hover:scale-105 transition duration-300 border-l-4 border-l-green-500">
            <div class="card-body p-4 text-center">
                <i class="fas fa-building fa-3x text-green-500 mb-3"></i>
                <h5 class="card-title text-xl font-semibold mb-2">Gestión de Empresas</h5>
                <p class="card-text text-gray-600 mb-3">Creación, Eliminación y Edición de empresas</p>
                <a href="{{ url_for('main.gestion_empresa') }}" class="btn btn-success btn-sm rounded-full">
                    <i class="fas fa-arrow-right me-1"></i> Ir a Empresas
                </a>
            </div>
        </div>

    </div>

    {% endif %}

    {% if current_user.is_authenticated and current_user.rol_obj.nombre not in ['Administrador', 'Superadministrador'] %}
    <div class="mt-10 p-6 bg-white rounded-2xl shadow-xl">
        <h3 class="text-2xl font-semibold text-gray-700 border-b pb-2 mb-4">
            <i class="fas fa-user-circle me-2 text-indigo-500"></i> Mi Perfil
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700">
            <div>
                <p class="font-medium">NIF:</p>
                <p class="font-bold">{{ current_user.nif }}</p>
            </div>
            <div>
                <p class="font-medium">Rol Asignado:</p>
                <p class="font-bold text-purple-600">{{ current_user.rol_obj.nombre }}</p>
            </div>
            <div>
                <p class="font-medium">Email:</p>
                <p class="font-bold">{{ current_user.email }}</p>
            </div>
            <div>
                <p class="font-medium">Empresa:</p>
                <p class="font-bold">{{ current_user.empresa_obj.nombre_comercial }}</p>
            </div>
            <div>
                <p class="font-medium">Horario Asignado:</p>
                <p class="font-bold">{{ current_user.horario_obj.nombre if current_user.horario_obj else 'No Asignado' }}</p>
            </div>
        </div>
    </div>
    {% endif %}

</div>
{% endblock %}